kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: products-data
  labels:
    app: products-data
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 200Gi
  storageClassName: default
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: products-csv2
data:
  ProductList.csv: |
    Product,ProductID,AcquisitionDate,Size,CollectionID
    Sentinel-2,L2A_T52SDE_A020120_20190430T021211,2019-04-30T02:07:01.024Z,772.12 MB,c1d478b0-c7b6-4e94-a3bd-58a1229c2be8
    Sentinel-2,L2A_T52SDE_A011183_20190428T021610,2019-04-28T02:16:09.024Z,374.27 MB,224b7202-15e7-4e9b-ae8f-08898593d392
    Sentinel-2,L2A_T52SDE_A011140_20190425T020700,2019-04-25T02:06:59.024Z,813.55 MB,8aa9fb7c-7b18-4df7-9677-5ae4cb00ebb9
    Sentinel-2,L2A_T52SDE_A020020_20190423T022127,2019-04-23T02:16:11.024Z,317.66 MB,e7f1bb22-bc79-4882-8aab-50eb0e40eef9
    Sentinel-2,L2A_T52SDE_A019977_20190420T020656,2019-04-20T02:07:01.024Z,1.13 GB,21966b6c-f354-46c3-bfbe-bfca54dbdf4a
    Sentinel-2,L2A_T52SDE_A011040_20190418T021609,2019-04-18T02:16:09.024Z,553.62 MB,b2a6edaa-eb8a-44ea-a322-31f646c7aadb
    Sentinel-2,L2A_T52SDE_A010997_20190415T020658,2019-04-15T02:06:59.024Z,1.12 GB,6ecabb4f-f956-4fda-91b7-eb355ca9c198
    Sentinel-2,L2A_T52SDE_A019877_20190413T022607,2019-04-13T02:16:11.024Z,328.05 MB,74291bc3-5251-4f98-bf06-e2ecc71ab9c8
    Sentinel-2,L2A_T52SDE_A019834_20190410T020655,2019-04-10T02:07:01.024Z,737.04 MB,cf100dfb-d982-4ab7-84d8-8667eec03c82
    Sentinel-2,L2A_T52SDE_A010897_20190408T021607,2019-04-08T02:16:09.024Z,573.05 MB,71cad421-1a71-4a9c-986f-803060eea0a3
    Sentinel-2,L2A_T52SDE_A010854_20190405T020656,2019-04-05T02:06:59.024Z,1.06 GB,8ebb5058-8194-4716-9d51-139d52183f27
    Sentinel-2,L2A_T52SDE_A019734_20190403T021647,2019-04-03T02:16:51.024Z,591.30 MB,3f107f6f-d50e-44e2-9095-4d226f725e58
    Sentinel-2,L2A_T52SDE_A019691_20190331T021551,2019-03-31T02:06:51.024Z,1.08 GB,370a4f41-a0ea-4c91-b320-a37f8c88802f
    Sentinel-2,L2A_T52SDE_A010754_20190329T022447,2019-03-29T02:16:09.024Z,501.86 MB,5dd12aa4-1276-4e96-afaa-1a14675264e6
    Sentinel-2,L2A_T52SDE_A010711_20190326T020654,2019-03-26T02:06:59.024Z,1.11 GB,d909b6c1-ad53-4360-9295-9baa8e0dfe1a
    Sentinel-2,L2A_T52SDE_A019591_20190324T022122,2019-03-24T02:16:01.024Z,586.08 MB,38df9147-be00-4b86-8458-8371f4ba5ba0
    Sentinel-2,L2A_T52SDE_A019548_20190321T021208,2019-03-21T02:06:51.024Z,1001.32 MB,c400d543-21bd-4e78-b479-a29b028cda44
    Sentinel-2,L2A_T52SDE_A010611_20190319T022214,2019-03-19T02:16:59.024Z,534.44 MB,761ecf7f-dbd5-49d6-b355-d94b34f16622
    Sentinel-2,L2A_T52SDE_A010568_20190316T021219,2019-03-16T02:06:49.024Z,1.09 GB,ed4902fa-719d-400a-a118-b89954554b83
    Sentinel-2,L2A_T52SDE_A019448_20190314T022120,2019-03-14T02:16:01.024Z,572.48 MB,be7e56d4-c494-4f5f-beeb-72241085e5b0
    Sentinel-2,L2A_T52SDE_A019405_20190311T020648,2019-03-11T02:06:51.024Z,993.44 MB,9fa8688d-e2c5-4f30-be03-2c52d74e5259
    Sentinel-2,L2A_T52SDE_A010468_20190309T022121,2019-03-09T02:15:59.024Z,436.70 MB,2d96c5ef-5cbe-40e4-a530-fb7258be6d75
    Sentinel-2,L2A_T52SDE_A010425_20190306T021725,2019-03-06T02:06:49.024Z,808.25 MB,c91a2efc-0938-4662-acc0-53707a731ab5
    Sentinel-2,L2A_T52SDE_A019305_20190304T021558,2019-03-04T02:16:01.024Z,550.13 MB,1393d50b-9a81-44f9-bd90-7fd0b84eeba5
    Sentinel-2,L2A_T52SDE_A019262_20190301T021502,2019-03-01T02:06:51.024Z,1.09 GB,3ebc79a2-1264-436e-aa25-f171be65b33c
    Sentinel-2,L2A_T52SDE_A010325_20190227T022400,2019-02-27T02:16:39.024Z,382.18 MB,6cda211c-7848-4d85-b904-6856e1d2bdff
    Sentinel-2,L2A_T52SDE_A019162_20190222T022229,2019-02-22T02:17:11.024Z,459.15 MB,c9b729f1-7900-440a-b694-06a802077016
    Sentinel-2,L2A_T52SDE_A019119_20190219T021300,2019-02-19T02:07:31.024Z,834.64 MB,809bcae1-70b8-4450-b003-9252c248c0c5
    Sentinel-2,L2A_T52SDE_A010182_20190217T022318,2019-02-17T02:17:49.024Z,576.50 MB,7f75648e-faad-4078-8b46-edbee65e6cd7
    Sentinel-2,L2A_T52SDE_A010139_20190214T020801,2019-02-14T02:07:59.024Z,1.02 GB,2cd4627f-c6d7-4230-b7c0-3abbcc804fae
    Sentinel-2,L2A_T52SDE_A019019_20190212T022728,2019-02-12T02:18:21.024Z,316.89 MB,932af0f3-3453-4edb-812d-513d41fe3ad2
    Sentinel-2,L2A_T52SDE_A018976_20190209T020830,2019-02-09T02:08:31.024Z,1.09 GB,dbfaa628-ae59-446b-a882-5956ccde8b7e
    Sentinel-2,L2A_T52SDE_A010039_20190207T021849,2019-02-07T02:18:49.024Z,406.67 MB,23c10ad8-723f-408d-9cea-dc780a8e5115
    Sentinel-2,L2A_T52SDE_A009996_20190204T020902,2019-02-04T02:08:59.024Z,1.07 GB,c9a04065-2a6a-4eea-a61c-6320231dbbbf
    Sentinel-2,L2A_T52SDE_A018876_20190202T021915,2019-02-02T02:19:21.024Z,619.92 MB,4f808718-b5d0-4180-baeb-fa22d35857e4
    Sentinel-2,L2A_T52SDE_A018833_20190130T021300,2019-01-30T02:09:31.024Z,1.03 GB,e6be4d86-d332-4c81-95e3-bb479e5a5a8e
    Sentinel-2,L2A_T52SDE_A009896_20190128T021943,2019-01-28T02:19:49.024Z,550.19 MB,a7f49461-d903-4452-92d3-523878e4dc7b
    Sentinel-2,L2A_T52SDE_A009853_20190125T021521,2019-01-25T02:09:59.024Z,910.49 MB,a658bd43-5b54-4089-a587-15ed72e45f2e
    Sentinel-2,L2A_T52SDE_A018733_20190123T022523,2019-01-23T02:20:01.024Z,558.98 MB,af608554-f8ca-4a37-ad84-c965d1c8b3bf
    Sentinel-2,L2A_T52SDE_A018690_20190120T021514,2019-01-20T02:10:11.024Z,1.09 GB,148a1724-9956-4075-929b-6dacc34cecfe
    Sentinel-2,L2A_T52SDE_A009710_20190115T021031,2019-01-15T02:10:29.024Z,1.06 GB,ec314ddb-8cae-48f8-afd3-67ace11bd91d
    Sentinel-2,L2A_T52SDE_A018590_20190113T022347,2019-01-13T02:20:41.024Z,543.64 MB,b4f9ca5e-b3ee-4ce2-808c-3a6d7ca5e44d
    Sentinel-2,L2A_T52SDE_A018547_20190110T021559,2019-01-10T02:10:41.024Z,1.04 GB,df79f6b9-278c-4de2-840b-2f89ec99aed2
    Sentinel-2,L2A_T52SDE_A009610_20190108T022054,2019-01-08T02:20:59.024Z,567.08 MB,f47507ca-5769-434c-be05-481935197169
    Sentinel-2,L2A_T52SDE_A009567_20190105T021056,2019-01-05T02:10:59.024Z,1.05 GB,00a543e0-a256-4b35-99f5-4d00f6e4373b
    Sentinel-2,L2A_T52SDE_A018447_20190103T022621,2019-01-03T02:21:01.024Z,581.28 MB,bba23d41-e5a8-40cb-ba46-5522b13abeab
  LeftProduct.csv: |
    Product,ProductID,AcquisitionDate,Size,CollectionID
    Sentinel-2,L2A_T52SDE_A019591_20190324T022122,2019-03-24T02:16:01.024Z,586.08 MB,38df9147-be00-4b86-8458-8371f4ba5ba0
    Sentinel-2,L2A_T52SDE_A019548_20190321T021208,2019-03-21T02:06:51.024Z,1001.32 MB,c400d543-21bd-4e78-b479-a29b028cda44
    Sentinel-2,L2A_T52SDE_A010611_20190319T022214,2019-03-19T02:16:59.024Z,534.44 MB,761ecf7f-dbd5-49d6-b355-d94b34f16622
    Sentinel-2,L2A_T52SDE_A010568_20190316T021219,2019-03-16T02:06:49.024Z,1.09 GB,ed4902fa-719d-400a-a118-b89954554b83
    Sentinel-2,L2A_T52SDE_A019448_20190314T022120,2019-03-14T02:16:01.024Z,572.48 MB,be7e56d4-c494-4f5f-beeb-72241085e5b0
    Sentinel-2,L2A_T52SDE_A019405_20190311T020648,2019-03-11T02:06:51.024Z,993.44 MB,9fa8688d-e2c5-4f30-be03-2c52d74e5259
    Sentinel-2,L2A_T52SDE_A010468_20190309T022121,2019-03-09T02:15:59.024Z,436.70 MB,2d96c5ef-5cbe-40e4-a530-fb7258be6d75
    Sentinel-2,L2A_T52SDE_A010425_20190306T021725,2019-03-06T02:06:49.024Z,808.25 MB,c91a2efc-0938-4662-acc0-53707a731ab5
    Sentinel-2,L2A_T52SDE_A019305_20190304T021558,2019-03-04T02:16:01.024Z,550.13 MB,1393d50b-9a81-44f9-bd90-7fd0b84eeba5
    Sentinel-2,L2A_T52SDE_A019262_20190301T021502,2019-03-01T02:06:51.024Z,1.09 GB,3ebc79a2-1264-436e-aa25-f171be65b33c
    Sentinel-2,L2A_T52SDE_A010325_20190227T022400,2019-02-27T02:16:39.024Z,382.18 MB,6cda211c-7848-4d85-b904-6856e1d2bdff
    Sentinel-2,L2A_T52SDE_A019162_20190222T022229,2019-02-22T02:17:11.024Z,459.15 MB,c9b729f1-7900-440a-b694-06a802077016
    Sentinel-2,L2A_T52SDE_A019119_20190219T021300,2019-02-19T02:07:31.024Z,834.64 MB,809bcae1-70b8-4450-b003-9252c248c0c5
    Sentinel-2,L2A_T52SDE_A010182_20190217T022318,2019-02-17T02:17:49.024Z,576.50 MB,7f75648e-faad-4078-8b46-edbee65e6cd7
    Sentinel-2,L2A_T52SDE_A010139_20190214T020801,2019-02-14T02:07:59.024Z,1.02 GB,2cd4627f-c6d7-4230-b7c0-3abbcc804fae
    Sentinel-2,L2A_T52SDE_A019019_20190212T022728,2019-02-12T02:18:21.024Z,316.89 MB,932af0f3-3453-4edb-812d-513d41fe3ad2
    Sentinel-2,L2A_T52SDE_A018976_20190209T020830,2019-02-09T02:08:31.024Z,1.09 GB,dbfaa628-ae59-446b-a882-5956ccde8b7e
    Sentinel-2,L2A_T52SDE_A010039_20190207T021849,2019-02-07T02:18:49.024Z,406.67 MB,23c10ad8-723f-408d-9cea-dc780a8e5115
    Sentinel-2,L2A_T52SDE_A009996_20190204T020902,2019-02-04T02:08:59.024Z,1.07 GB,c9a04065-2a6a-4eea-a61c-6320231dbbbf
    Sentinel-2,L2A_T52SDE_A018876_20190202T021915,2019-02-02T02:19:21.024Z,619.92 MB,4f808718-b5d0-4180-baeb-fa22d35857e4
    Sentinel-2,L2A_T52SDE_A018833_20190130T021300,2019-01-30T02:09:31.024Z,1.03 GB,e6be4d86-d332-4c81-95e3-bb479e5a5a8e
    Sentinel-2,L2A_T52SDE_A009896_20190128T021943,2019-01-28T02:19:49.024Z,550.19 MB,a7f49461-d903-4452-92d3-523878e4dc7b
    Sentinel-2,L2A_T52SDE_A009853_20190125T021521,2019-01-25T02:09:59.024Z,910.49 MB,a658bd43-5b54-4089-a587-15ed72e45f2e
    Sentinel-2,L2A_T52SDE_A018733_20190123T022523,2019-01-23T02:20:01.024Z,558.98 MB,af608554-f8ca-4a37-ad84-c965d1c8b3bf
    Sentinel-2,L2A_T52SDE_A018690_20190120T021514,2019-01-20T02:10:11.024Z,1.09 GB,148a1724-9956-4075-929b-6dacc34cecfe
    Sentinel-2,L2A_T52SDE_A009710_20190115T021031,2019-01-15T02:10:29.024Z,1.06 GB,ec314ddb-8cae-48f8-afd3-67ace11bd91d
    Sentinel-2,L2A_T52SDE_A018590_20190113T022347,2019-01-13T02:20:41.024Z,543.64 MB,b4f9ca5e-b3ee-4ce2-808c-3a6d7ca5e44d
    Sentinel-2,L2A_T52SDE_A018547_20190110T021559,2019-01-10T02:10:41.024Z,1.04 GB,df79f6b9-278c-4de2-840b-2f89ec99aed2
    Sentinel-2,L2A_T52SDE_A009610_20190108T022054,2019-01-08T02:20:59.024Z,567.08 MB,f47507ca-5769-434c-be05-481935197169
    Sentinel-2,L2A_T52SDE_A009567_20190105T021056,2019-01-05T02:10:59.024Z,1.05 GB,00a543e0-a256-4b35-99f5-4d00f6e4373b
    Sentinel-2,L2A_T52SDE_A018447_20190103T022621,2019-01-03T02:21:01.024Z,581.28 MB,bba23d41-e5a8-40cb-ba46-5522b13abeab

---

apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: sentinels2
  namespace: default
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: sentinels2
    spec:
      containers:
        - name: sentinels2
          image: zerofruit/sentinel:latest
          imagePullPolicy: Always
          volumeMounts:
            - name: products-data
              mountPath: /usr/src/app/s
            - name: products-csv2
              mountPath: /usr/src/app/csv
          command: ["npm"]
          args: ["run", "keep"]
          env:
            - name: SUBDIR
              value: "3"
          ports:
            - containerPort: 7070
          readinessProbe:
            httpGet:
              path: /
              port: 7070
            timeoutSeconds: 10
      volumes:
        - name: products-csv2
          configMap:
            name: products-csv2
        - name: products-data
          persistentVolumeClaim:
            claimName: products-data

---

apiVersion: v1
kind: Service
metadata:
  name: sentinels2
spec:
  type: LoadBalancer
  ports:
    - port: 80
      targetPort: 7070
  selector:
    app: sentinels2

