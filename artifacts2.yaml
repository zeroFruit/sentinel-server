kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: products-data
  labels:
    app: products-data
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 200Gi
  storageClassName: default
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: products-csv2
data:
  ProductList.csv: |
    Product,ProductID,AcquisitionDate,Size,CollectionID
    Sentinel-2,L1C_T52SDE_A016431_20200429T021723,2020-04-29T02:06:49.024Z,0,463cfa2b-f2fc-4ef1-ae1a-743483da7824
    Sentinel-2,L2A_T52SDE_A025311_20200427T021605,2020-04-27T02:16:11.024Z,36.576868,27671ac5-c2b4-4c7c-b8d7-851bdf8ceb94
    Sentinel-2,L1C_T52SDE_A025311_20200427T021605,2020-04-27T02:16:11.024Z,31.5672,775010f2-952d-49eb-9d2d-94eddc6736d1
    Sentinel-2,L2A_T52SDE_A025268_20200424T020655,2020-04-24T02:07:01.024Z,1.134555,9d167743-5317-4458-97cf-6ba34ac8607a
    Sentinel-2,L1C_T52SDE_A025268_20200424T020655,2020-04-24T02:07:01.024Z,0.0936,3d85bfe6-e4c2-4b11-9b37-fba860aa71e6
    Sentinel-2,L2A_T52SDE_A016331_20200422T021557,2020-04-22T02:15:59.024Z,25.546788,f8294c6a-24fb-496c-8bf4-06a23f39c2b0
    Sentinel-2,L1C_T52SDE_A016331_20200422T021557,2020-04-22T02:15:59.024Z,17.0689,d9956e2b-0be6-43e6-b62c-f75ff7da84df
    Sentinel-2,L2A_T52SDE_A016288_20200419T020648,2020-04-19T02:06:49.024Z,99.98826,c5d12de0-11cb-4609-b9cd-c020021b20d2
    Sentinel-2,L1C_T52SDE_A016288_20200419T020648,2020-04-19T02:06:49.024Z,100,34b8bec9-13b2-4d21-9e2b-9b23ae07741c
    Sentinel-2,L2A_T52SDE_A025168_20200417T021603,2020-04-17T02:16:01.024Z,98.574763,809c6d7d-832a-479c-b926-d7bfe5c91eb1
    Sentinel-2,L1C_T52SDE_A025168_20200417T021603,2020-04-17T02:16:01.024Z,98.3396,b8d9f7fb-d28d-4a22-b89c-18b60d61a4f0
    Sentinel-2,L2A_T52SDE_A025125_20200414T020652,2020-04-14T02:06:51.024Z,1.129502,42930cbc-3f12-482a-b7cb-60440f825cd6
    Sentinel-2,L1C_T52SDE_A025125_20200414T020652,2020-04-14T02:06:51.024Z,0.0272,5d76b9b6-0b03-4143-b40c-0472db103f48
    Sentinel-2,L2A_T52SDE_A016188_20200412T021559,2020-04-12T02:15:59.024Z,58.472437,e517940d-e9bc-442f-81b5-16b1dde8835f
    Sentinel-2,L1C_T52SDE_A016188_20200412T021559,2020-04-12T02:15:59.024Z,99.2829,95069a7b-9e1e-4ce8-9c57-5f954f538c1a
    Sentinel-2,L2A_T52SDE_A016145_20200409T020649,2020-04-09T02:06:49.024Z,1.202309,c1e69a4a-59c1-49b0-af04-a2d8932562ca
    Sentinel-2,L1C_T52SDE_A016145_20200409T020649,2020-04-09T02:06:49.024Z,0,972ca33b-2f35-4ecc-a548-9fc7ed9b0bf0
    Sentinel-2,L2A_T52SDE_A025025_20200407T021600,2020-04-07T02:16:01.024Z,0.875579,7e2b1624-6072-47eb-9f91-25b69868c3c6
    Sentinel-2,L1C_T52SDE_A025025_20200407T021600,2020-04-07T02:16:01.024Z,0,d8c85a81-b6c8-44a2-985c-09210f14e189
    Sentinel-2,L2A_T52SDE_A024982_20200404T020649,2020-04-04T02:06:51.024Z,1.52393,76a04be4-6e5c-40e0-8fb6-13efaf54772b
    Sentinel-2,L1C_T52SDE_A024982_20200404T020649,2020-04-04T02:06:51.024Z,0,5c64aed9-d13a-4e90-b6d6-f12efa01fd83
    Sentinel-2,L2A_T52SDE_A016045_20200402T021600,2020-04-02T02:15:59.024Z,31.984812,4e3d3e89-95c1-4cd0-9a3a-a61f7c7d31c4
    Sentinel-2,L1C_T52SDE_A016045_20200402T021600,2020-04-02T02:15:59.024Z,41.8813,445d5683-6eaf-4463-ae51-2e4de51a5c35
    Sentinel-2,L1C_T52SDE_A016002_20200330T020650,2020-03-30T02:06:49.024Z,82.0856,a5ee619a-2c32-498a-b3de-8266f9253ebc
    Sentinel-2,L2A_T52SDE_A016002_20200330T020650,2020-03-30T02:06:49.024Z,79.746383,8eb6cae4-431d-4680-9acc-2736762fd90f
    Sentinel-2,L2A_T52SDE_A024882_20200328T021559,2020-03-28T02:16:01.024Z,99.999998,81580637-0851-459d-b9a6-064040183de0
    Sentinel-2,L1C_T52SDE_A024882_20200328T021559,2020-03-28T02:16:01.024Z,100,629abef5-465a-4e7b-a9a8-c408bd5c27d1
    Sentinel-2,L1C_T52SDE_A024839_20200325T020649,2020-03-25T02:06:51.024Z,0.051,aa57823f-4af6-478a-9f45-28396f5edde5
    Sentinel-2,L2A_T52SDE_A024839_20200325T020649,2020-03-25T02:06:51.024Z,1.481601,1170df36-bbb0-4206-8547-23e4b1ac4b2c
    Sentinel-2,L2A_T52SDE_A015902_20200323T021601,2020-03-23T02:15:59.024Z,1.361944,7a16aa14-5330-4477-bc57-fd36a8fe8a62
    Sentinel-2,L1C_T52SDE_A015902_20200323T021601,2020-03-23T02:15:59.024Z,0,c568f506-9f16-4a04-99bd-203383c288b7
    Sentinel-2,L1C_T52SDE_A015859_20200320T020651,2020-03-20T02:06:49.024Z,0,e10291e8-f4c3-4dd8-b8b4-20f1a7704846
    Sentinel-2,L2A_T52SDE_A015859_20200320T020651,2020-03-20T02:06:49.024Z,1.34118,7e0cc889-f44d-4500-8a9e-cd9cc6910995
    Sentinel-2,L2A_T52SDE_A024739_20200318T021559,2020-03-18T02:16:01.024Z,1.590529,8f1a328b-9476-4e03-8893-f4153774510d
    Sentinel-2,L1C_T52SDE_A024739_20200318T021559,2020-03-18T02:16:01.024Z,0,b8ec6f1b-ec4e-4026-bf1b-8b4130ecd277
    Sentinel-2,L2A_T52SDE_A024696_20200315T020649,2020-03-15T02:06:51.024Z,40.299099,f4d89a25-d9d2-4629-9f1d-40bd36a8322c
    Sentinel-2,L1C_T52SDE_A024696_20200315T020649,2020-03-15T02:06:51.024Z,33.4893,ffea56a3-fb99-4471-8f0b-6bc64bc66582
    Sentinel-2,L2A_T52SDE_A015759_20200313T021601,2020-03-13T02:15:59.024Z,44.061408,414590ed-f361-4567-aff6-4efa1221848d
    Sentinel-2,L1C_T52SDE_A015759_20200313T021601,2020-03-13T02:15:59.024Z,39.2838,f0f3cf7f-85d1-41d4-bc48-b77d39bc5a27
    Sentinel-2,L2A_T52SDE_A015716_20200310T020651,2020-03-10T02:06:49.024Z,96.164827,4c5e2779-7e11-449f-a7a4-73329011a535
    Sentinel-2,L1C_T52SDE_A015716_20200310T020651,2020-03-10T02:06:49.024Z,100,d00e1655-db53-44e0-b370-79a3a95c5521
    Sentinel-2,L2A_T52SDE_A024596_20200308T021559,2020-03-08T02:16:01.024Z,1.257135,834867b4-b3c0-44d8-80f5-e0362b0bf90a
    Sentinel-2,L1C_T52SDE_A024596_20200308T021559,2020-03-08T02:16:01.024Z,0,8f1dcd4e-72a1-4c3d-b0f0-9f8ac4aeacd9
    Sentinel-2,L2A_T52SDE_A024553_20200305T020649,2020-03-05T02:06:51.024Z,4.580963,c92636b3-1971-4be5-a875-32751d0aea97
    Sentinel-2,L1C_T52SDE_A024553_20200305T020649,2020-03-05T02:06:51.024Z,3.8061,3dcd81f1-695f-45a2-ab06-76e50a1b9b38
    Sentinel-2,L2A_T52SDE_A015616_20200303T021602,2020-03-03T02:15:59.024Z,41.448594,e3a10f89-7fcd-446d-8410-698a06e19e38
    Sentinel-2,L1C_T52SDE_A015616_20200303T021602,2020-03-03T02:15:59.024Z,30.7876,87f77a08-c233-4b7a-86d3-6fa78ac7aa80
    Sentinel-2,L2A_T52SDE_A015573_20200229T021725,2020-02-29T02:06:49.024Z,99.999142,54a741eb-64c9-474a-bdde-97449692c51c
    Sentinel-2,L1C_T52SDE_A015573_20200229T021725,2020-02-29T02:06:49.024Z,99.9887,7804901a-a2b2-42f7-8cfc-bbcd8ea4bcc7
    Sentinel-2,L2A_T52SDE_A024453_20200227T021634,2020-02-27T02:16:31.024Z,88.138932,39c658d1-c2a8-450e-b341-64a583d536f8
    Sentinel-2,L1C_T52SDE_A024453_20200227T021634,2020-02-27T02:16:31.024Z,86.461,17ab7fa3-3a24-4bbc-bb78-421e07ddc269
    Sentinel-2,L2A_T52SDE_A024410_20200224T020651,2020-02-24T02:06:51.024Z,11.071106,c30dfb04-e11f-4ad9-bab7-80489ca15383
    Sentinel-2,L1C_T52SDE_A024410_20200224T020651,2020-02-24T02:06:51.024Z,12.1341,40b967dd-e1b0-41d1-a63b-c4ce30f95756
    Sentinel-2,L2A_T52SDE_A015473_20200222T021711,2020-02-22T02:17:09.024Z,4.034729,a9ac401d-a033-4880-b4f3-705f15a7725e
    Sentinel-2,L1C_T52SDE_A015473_20200222T021711,2020-02-22T02:17:09.024Z,0.8089,8fdb9978-7c3b-4bc7-84ce-39e7a8ec3d25
    Sentinel-2,L1C_T52SDE_A015430_20200219T020727,2020-02-19T02:07:29.024Z,17.7154,4c4ba829-80b7-41c6-95d6-2631d7417c48
    Sentinel-2,L2A_T52SDE_A015430_20200219T020727,2020-02-19T02:07:29.024Z,14.184122,53bfa23d-2c56-4f7a-ba69-3030cc947411
    Sentinel-2,L2A_T52SDE_A024310_20200217T021741,2020-02-17T02:17:41.024Z,72.873919,f73c78bf-5686-49a9-a440-b2ad19d61fcb
    Sentinel-2,L1C_T52SDE_A024310_20200217T021741,2020-02-17T02:17:41.024Z,66.9128,ebd4c637-5dd8-40bc-b3c3-711bfc151511
    Sentinel-2,L2A_T52SDE_A024267_20200214T020757,2020-02-14T02:08:01.024Z,1.758794,dac0ad10-9a5b-4f2a-abd6-51a8526954ca
    Sentinel-2,L1C_T52SDE_A024267_20200214T020757,2020-02-14T02:08:01.024Z,0.0727,d8c545c4-d16d-4b5f-9216-fd7f46afa211
    Sentinel-2,L2A_T52SDE_A015330_20200212T021815,2020-02-12T02:18:19.024Z,78.263247,c29a7c5f-f282-4bda-926a-c7c63675e087
    Sentinel-2,L1C_T52SDE_A015330_20200212T021815,2020-02-12T02:18:19.024Z,96.9429,759594b6-bc5f-4b83-800d-1fcfaefc615f
    Sentinel-2,L1C_T52SDE_A015287_20200209T020828,2020-02-09T02:08:29.024Z,2.2239,a1045274-e5fb-4cfb-8132-5d87d2d37a45
    Sentinel-2,L2A_T52SDE_A015287_20200209T020828,2020-02-09T02:08:29.024Z,4.01965,e5f2659a-3449-4537-8985-dbf1afd5f1a8
    Sentinel-2,L2A_T52SDE_A024167_20200207T021842,2020-02-07T02:18:41.024Z,49.825923,2a190060-53fb-46ae-988a-5c97417b0196
    Sentinel-2,L1C_T52SDE_A024167_20200207T021842,2020-02-07T02:18:41.024Z,69.0465,743e7dc7-22c9-4642-9664-36b534d97c65
    Sentinel-2,L2A_T52SDE_A024124_20200204T020855,2020-02-04T02:09:01.024Z,8.128214,37b9f622-9684-42a7-8070-84ef33c2bfe7
    Sentinel-2,L1C_T52SDE_A024124_20200204T020855,2020-02-04T02:09:01.024Z,6.6224,eeba40f9-9916-4ca1-b008-273b1b29b467
    Sentinel-2,L2A_T52SDE_A015187_20200202T021911,2020-02-02T02:19:09.024Z,27.353559,b58546cc-de12-46b1-b3fd-8868b7f7e25c
    Sentinel-2,L1C_T52SDE_A015187_20200202T021911,2020-02-02T02:19:09.024Z,26.6479,d8af6470-6b4e-4000-a782-6dce1c4fa72a
    Sentinel-2,L2A_T52SDE_A015144_20200130T020923,2020-01-30T02:09:29.024Z,31.035861,39a91ae4-13ce-49d9-a0ea-137102312fbf
    Sentinel-2,L1C_T52SDE_A015144_20200130T020923,2020-01-30T02:09:29.024Z,23.2338,1b00fc28-dcb9-485d-abe2-d49803da24a4
    Sentinel-2,L2A_T52SDE_A024024_20200128T021937,2020-01-28T02:19:41.024Z,84.756088,b9e0261c-0fcf-4f52-850a-e3d9722eaeb0
    Sentinel-2,L1C_T52SDE_A024024_20200128T021937,2020-01-28T02:19:41.024Z,75.0193,23aedb61-b796-4957-bd59-991a8e1d1ebd
    Sentinel-2,L2A_T52SDE_A023981_20200125T020948,2020-01-25T02:09:51.024Z,100,d52542f8-c3fb-4b54-b363-d46fb3383f4a
    Sentinel-2,L1C_T52SDE_A023981_20200125T020948,2020-01-25T02:09:51.024Z,100,5c261613-133e-4040-afe2-c0f6288bb786
    Sentinel-2,L2A_T52SDE_A015044_20200123T022001,2020-01-23T02:19:59.024Z,99.942383,84bb3a5c-8e3a-4b95-8973-de324697940e
    Sentinel-2,L1C_T52SDE_A015044_20200123T022001,2020-01-23T02:19:59.024Z,99.3531,d8457cb5-4e4f-43b2-adf1-4a148cfb2503
    Sentinel-2,L2A_T52SDE_A015001_20200120T021008,2020-01-20T02:10:09.024Z,30.165372,203f500a-2784-4091-a945-2daed999756e
    Sentinel-2,L1C_T52SDE_A015001_20200120T021008,2020-01-20T02:10:09.024Z,20.1749,e86bb4e4-551f-4504-85d1-12ee7ec41778
    Sentinel-2,L2A_T52SDE_A023881_20200118T022020,2020-01-18T02:20:21.024Z,29.071243,8b61398e-1487-4c4d-aa57-efef32b8dff4
    Sentinel-2,L1C_T52SDE_A023881_20200118T022020,2020-01-18T02:20:21.024Z,12.2768,ee54f526-3aa7-4cb6-bd6b-cd890646e257
    Sentinel-2,L2A_T52SDE_A023838_20200115T021027,2020-01-15T02:10:31.024Z,2.386489,f97da692-2007-40f2-9373-64c6c0c232d3
    Sentinel-2,L1C_T52SDE_A023838_20200115T021027,2020-01-15T02:10:31.024Z,0.6976,15a5aa57-74e3-4aeb-b344-761ccef966c9
    Sentinel-2,L2A_T52SDE_A014901_20200113T022038,2020-01-13T02:20:39.024Z,54.024057,11a5067a-9b8f-4b6c-a614-5a862c19c88c
    Sentinel-2,L1C_T52SDE_A014901_20200113T022038,2020-01-13T02:20:39.024Z,42.2345,b8be21ed-a8f2-4aa4-a954-c907a7b03453
    Sentinel-2,L2A_T52SDE_A014858_20200110T021041,2020-01-10T02:10:39.024Z,5.920993,c8281c6d-7bad-4bf8-b138-fa45f8f719f0
    Sentinel-2,L1C_T52SDE_A014858_20200110T021041,2020-01-10T02:10:39.024Z,5.7771,34a63fd1-983d-41aa-8dca-0a1f9ec829c5
    Sentinel-2,L2A_T52SDE_A023738_20200108T022050,2020-01-08T02:20:51.024Z,84.28421,3abf26df-e677-4983-b812-d7340282b519
    Sentinel-2,L1C_T52SDE_A023738_20200108T022050,2020-01-08T02:20:51.024Z,86.4704,5c321f70-bacf-4655-9235-3e5a2adec26c
    Sentinel-2,L2A_T52SDE_A023695_20200105T021052,2020-01-05T02:10:51.024Z,1.686352,25be27c1-f555-4053-8bc8-1b00dba2a0ab
    Sentinel-2,L1C_T52SDE_A023695_20200105T021052,2020-01-05T02:10:51.024Z,0.181,b3d09e07-c61b-4ba2-85ec-f78f36bf8ace
    Sentinel-2,L2A_T52SDE_A014758_20200103T022101,2020-01-03T02:20:59.024Z,14.390071,41dd4634-bbfd-4822-8c0b-0f460cc64120
    Sentinel-2,L1C_T52SDE_A014758_20200103T022101,2020-01-03T02:20:59.024Z,16.1207,ad47b747-9f09-4e19-b615-1e5664b00bd6
  LeftProduct.csv: |

---

apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: sentinels2
  namespace: default
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: sentinels2
    spec:
      containers:
        - name: sentinels2
          image: zerofruit/sentinel:latest
          imagePullPolicy: Always
          volumeMounts:
            - name: products-data
              mountPath: /usr/src/app/s
            - name: products-csv2
              mountPath: /usr/src/app/csv
          command: ["npm"]
          args: ["run", "bootstrap"]
          env:
            - name: SUBDIR
              value: "3"
          ports:
            - containerPort: 7070
          readinessProbe:
            httpGet:
              path: /
              port: 7070
            timeoutSeconds: 10
      volumes:
        - name: products-csv2
          configMap:
            name: products-csv2
        - name: products-data
          persistentVolumeClaim:
            claimName: products-data

---

apiVersion: v1
kind: Service
metadata:
  name: sentinels2
spec:
  type: LoadBalancer
  ports:
    - port: 80
      targetPort: 7070
  selector:
    app: sentinels2

